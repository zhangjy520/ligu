<%@ include file="../common/common.jsp"%>
<%@ page contentType="text/html;charset=UTF-8" %>

<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="login">
	<meta name="author" content="lexi">
	<style>
		*{
			box-sizing: border-box;
			margin:0;
			padding:0;
		}
		section{
			width:1000px;
			height:600px;
			border:1px solid #333;
			margin:0 auto;
			font-size:14px;
		}
		section aside{
			float:left;
			height:100%;
			border-right:1px solid #333;
			padding:50px 30px;
		}
		section aside div{
			margin:20px 0;
		}
		section aside div span{
			display:inline-block;
			width:100px;
		}
		aside div input[type=text]{
			height:28px;
			padding-left:5px;
		}
		aside div button{
			width:100%;
			height:35px;
			border:1px solid #169BD5;
			background:#169BD5;
			color:#fff;
			border-radius: 4px;
			font-size:14px;
		}
		main{
			padding:10px;
			padding-top: 50px;
			height:100%;
			overflow-y:scroll;
		}
		main table{
			width:80%;
		}
		table td{
			height:30px;
			padding-left:10px;
		}
	</style>
	<script src="${ctxStatic}/js/jquery.js"></script>

	<script>
		$(function() {
			$("#submit-btn").click(function(event){
				$.post($('form').attr('action'),{
                    station:$("input[name='station']").val(),
                    screen:$("input[name='screen']").val(),
                    className:$("input[name='className']").val(),
                },function(retJson){
                    if (retJson.code == '0') {
                        alert('保存成功');
						window.location.href="${ctx}/device/station/bindStation";
					} else {
				        alert(retJson.msg);
				    }
				});
			});
		});

		function del(mac) {

			if (confirm('确认删除吗？')) {
				$.post("${ctx}/device/station/del/"+mac,{

				},function(retJson){
					if (retJson.data > 0) {
						alert('删除成功');
						window.location.href="${ctx}/device/station/bindStation";
					} else {
						alert(retJson.msg);
					}
				});
			}
		}
	</script>
	<title>基站班牌绑定</title>
</head>
<body>

<section>
	<aside>
		<form action="${ctx}/device/station/doBindStation">
			<div>
				<span>基站MAC地址</span>
				<input name="station" value="${station.stationMac}" type="text" <c:if test="${!empty modify}"> disabled </c:if> placeholder="基站的MAC地址">
			</div>
			<div>
				<span>班牌MAC地址</span>
				<input name="screen" value="${station.screenMac}" type="text" <c:if test="${!empty modify}"> disabled </c:if> placeholder="班牌的MAC地址">
			</div>
			<div>
				<span>教室名称</span>
				<input name="className" value="${station.className}" type="text" placeholder="教室名称">
			</div>
			<div>
				<input id="submit-btn" type="button" value="绑定">
			</div>
		</form>
	</aside>
	<main>
		<c:if test="${empty modify}">

			<table>
				<tr>
					<th>
						班级名称
					</th>
					<th>
						基站MAC
					</th>
					<th>
						显示器MAC
					</th>
					<th>
						操作
					</th>
				</tr>
				<c:forEach items="${pageInfo.list}" var="station">
					<tr>
						<td>
								${station.className}
						</td>
						<td>
								${station.stationMac}
						</td>
						<td>
								${station.screenMac}
						</td>
						<td>
							<a href="${ctx}/device/station/edit/${station.stationMac}">编辑</a> |
							<input type="button" onclick="del('${station.stationMac}');" value="删除" />
						</td>
					</tr>
				</c:forEach>
			</table>

		</c:if>

	</main>
</section>

</body>
</html>